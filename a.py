import http.client

conn = http.client.HTTPSConnection("chatgpt.com")

payload = "{\"action\":\"next\",\"messages\":[{\"id\":\"aaa20fb4-3224-40fe-a1b5-21925f8f79b4\",\"author\":{\"role\":\"user\"},\"content\":{\"content_type\":\"text\",\"parts\":[\"how to use fetch in js?\"]},\"metadata\":{},\"create_time\":1722651317.494}],\"parent_message_id\":\"aaa175b4-4f2d-4f04-9a81-8cdbb92c8538\",\"model\":\"auto\",\"timezone_offset_min\":-480,\"suggestions\":[],\"history_and_training_disabled\":false,\"conversation_mode\":{\"kind\":\"primary_assistant\"},\"force_paragen\":false,\"force_paragen_model_slug\":\"\",\"force_nulligen\":false,\"force_rate_limit\":false,\"reset_rate_limits\":false,\"websocket_request_id\":\"68c4e11e-03ee-4011-ad56-6dcd2f25cf2a\",\"force_use_sse\":true,\"conversation_origin\":null}"

headers = {
    'authority': "chatgpt.com",
    'method': "POST",
    'path': "/backend-api/conversation",
    'scheme': "https",
    'Accept': "text/event-stream",
    'Accept-Encoding': "gzip, deflate, br, zstd",
    'Accept-Language': "en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7,en-GB;q=0.6",
    'Authorization': "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik1UaEVOVUpHTkVNMVFURTRNMEZCTWpkQ05UZzVNRFUxUlRVd1FVSkRNRU13UmtGRVFrRXpSZyJ9.eyJzZXNzaW9uX2lkIjoiLXZ3a3lpLWNlV210U2pQcnQ3UVVrQkZ4UWhXQmdvNE4iLCJodHRwczovL2FwaS5vcGVuYWkuY29tL3Byb2ZpbGUiOnsiZW1haWwiOiJhbGxpbi5vcGVuYWlAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWV9LCJodHRwczovL2FwaS5vcGVuYWkuY29tL2F1dGgiOnsicG9pZCI6Im9yZy1LUDNFdmw2d1A2WklqN1lIMkFiRTAzZFUiLCJ1c2VyX2lkIjoidXNlci15c0FOSVgwMmlvVGRTc2Z2THJJeXlDaHkifSwiaXNzIjoiaHR0cHM6Ly9hdXRoMC5vcGVuYWkuY29tLyIsInN1YiI6Imdvb2dsZS1vYXV0aDJ8MTExODk0MzA2MjQyMjEzNjQ4Njk4IiwiYXVkIjpbImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEiLCJodHRwczovL29wZW5haS5vcGVuYWkuYXV0aDBhcHAuY29tL3VzZXJpbmZvIl0sImlhdCI6MTcyMjQ3MTUxNSwiZXhwIjoxNzIzMzM1NTE1LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIG1vZGVsLnJlYWQgbW9kZWwucmVxdWVzdCBvcmdhbml6YXRpb24ucmVhZCBvcmdhbml6YXRpb24ud3JpdGUgb2ZmbGluZV9hY2Nlc3MiLCJhenAiOiJUZEpJY2JlMTZXb1RIdE45NW55eXdoNUU0eU9vNkl0RyJ9.m75LqZfEZSgTDywP34deVDX5qt4b8XZHWqlnOKzdV-mfRoo6adDlB9WgO93goL9RN9RJLsKgnKO4MMN94TxObl5LsQMQsTzsgnYX4ThRO8GAtsDWLOy2eWU3-8PTfB-p6v_ar_jY-NAqend2mCQwPpoxpZakaLYPtkAYdfljlnM0_QXEh5eOEgRMZX99JkSk2q0N3LD-GK0EEWXUHG22-xLQcbpcvjcaIyxXgw0dVF4-FaKEN9DAXrAh6sKKOlf7e2eASc0oyMh7Ka0xGK2ZgJG8jdRfAxK4HMe9FhJPp6c9_WmvnYjz99Da0CXPk9o9xwty9c040x4cw-taet_6OA",
    'Content-Length': "655",
    'Content-Type': "application/json",
    'Cookie': "oai-dm-tgt-c-240329=2024-04-02; __Host-next-auth.csrf-token=a6d6411cc594d76279ee3d57dab8de2281d02b11f435cc9eb1dd74604d5f1639|76b39b786c915d1e76fe3ed6f2cac5ee0a1e0bbced1260635d9eb34d48eb0908; oai-did=f9f5ab8b-165d-4962-82c1-e176d9069d79; oai-hlib=true; _cfuvid=WiK1d2yJoj1yFf5.MgtI6ukp5WW41kf8WOFLNHhl4gA-1722557696721-0.0.1.1-604800000; __cf_bm=ga510ebat23sLPr2zZ5Y_xQaEDBPiAbVg4Fay1vbpno-1722650386-1.0.1.1-Vi_w_8t60sHyFzhF36tW0WUtX0ImNLC0lbt0w5PW.XgDJvf83FhhrovPv.AnZeCiFElpXXP4G71Kh9CfFbZtGA; __cflb=0H28vzvP5FJafnkHxj4PgjSJTyTYMb4AVDHbMUVKDuf; cf_clearance=O6l0gAgGi3TB0ZlP6SaP8JzRGvrNAkrybeChjsl9uuo-1722651266-1.0.1.1-rzkC5aX16sw7ZGJe067rIYzQ1Vn8th6fcOk7fAAhxrNfkA0.BOdbLFUoBI3S8ykA.DKeqYGZwahtyEI5VK_7xA; __Secure-next-auth.callback-url=https://chat-onramp.unified-9.api.openai.com; __Secure-next-auth.session-token=eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..YEeX6BGDhhMiXao5.pwZhXh8NQCnGfFjTMUPsk4l8BTRjkBFSgFTqy6Jq5Qg7olowtPJiAHTYgpBMQJbqgOZIjHNWV4WgvMPaxl4AN08mkMWFBcUgg8FD4GHVq2c-s0xAbhtTyscqWU2PNjFj9mDq5pgm40dmds4jZWzXIbl5K0FzZIts7txvjpDGNF7y-k2ckmC9yjHZqZGb2YN9ne3OJmRFjVyCft5JFLg8NjIlMMETaFzYOLS03BaUQaekc_vOjgrAW8bRR6c5VzTz9jK0B66VdMemThhNc1Ps7u6oSUEGIZUnBycBPXMEYi12YgAJVGHSldXHL4UVLvGt-l4k2UstkJYttQ3OkM6C3CQmrEMHam40w8A41_2K3yExIZNQ8BTl73Fg_ptRBtDZyHf6_tJJC6KfUThgln9g3GfJhKi83SmZ235OM4vujRi__HyS_nxo3E0TKLPkid5yq_D42ve_2GffslayAAjxJYrvnmz5ZUXUPv9mYKZl9A8owrWs38fl8E8oKktkr958I9JIEdfDfTE06qYk2617iV7R3rtxkttQhY-X9Gh-vdpdnvXkaNUuJxJkX9igy15Y65Yp1SoA093fwKKs6ZGbgS9LC-G3HY-vW8I-XuS5s-QcA0SgZHCLHhsiqM5sdmTBcqWVVbsxJDOWptUxFIXnhKskQjwCZdfTHk2-n5Jfs8Uw8jezAPqDRzr-nRNHao9sm4U-iN6w3ZH0PMIEIV_nHRh4EckHkf2sNifnGSOfaq9gRtxgNEQj9TcotWwFJsz5bmiZcjQnj7YGrR9sS52nK73kANgJa9jg40i7eriv3KE_EPLL3qXINhwefO1jGPHiHc8myWwbCA4y3-RZIAqHuDe8mYeu0eXOeVY3PX-82uGu1B3b1d6-oJBfWvnRB_pqXzR6PcuncAXLA5ntUi4W-rTafIN39E5Oh3Wx_PHS-_XbrehpCNS0RlVs_SI8nVvB8cW_5MBiV7EDovWoPYw3CHibOqzpHrkdjwWdzVy70z3WMqFtAv8CfxvqGsRZuKZeWlGkkWL4Fbf4U2ffj6_5CCuf8A7VJ32sRwLTqTYWwzNWnZuTvXh2c7FeIwuwcQeJheLSlrMpoJEAi3AMQceaeQbeYDn9GTg3acuwCjoQL2d_DUpdoT0ZgIajM6erRMhQR9FjSDMK6nKcIZyyhaojkVMrVUCzIDLEya4On-zjoQwhcvEMM_iRQo2oEJz9foefv6g3BoZF_ZUCy_r12I0vLeitE1EnMvp7twE8zAscTpiKQTNB64DyDRtBR14UAeIofUv7PeYLCUO8aAveMGrPKFVn52J8X4LNFWCTEClF1unVnSJzjLNWYTNnJQj3QNn5WP1LzqXvIAJkEwZTakJs-u9ov_x3_LJRn2ktbpv4-xfL8v6fu5i_RkhkE6GqmdgMdoIPj-waEcP2PpX_adc47rYZvqRT4Mxv_1bTswwsWpb9GqlfoO-y4TQueMgffMdvV8_sky3HqwSTXT3tZ1vP8RUTW4GRBXed2gJFVvzjAH48E20xU7qbkwL_0kErpzXwT6frMOlFV2HtwLs0hrxfdI2J_gtlam04wuZZ4zUSk9kCknavph76b_Ae-sKiy7ZPhSh_b033O2rlFNDBCuZy1G34lhdqXW0wq3qo1XA2qm64XTrPvfbQISTYDxIXYxC5yQmno3rtZevXqBzmed75higDvm7ahHSrfxHFEh5vwEbwX8Wbi41PeKBEepZA8hDLLPLXnonI3yLN_mOAYnTOCwNJRoqvmezzz4QPp9n6ZAuU7D4xuJ8LFAEYtf_328CtyWXdVV9qM1uyEo7pkYwILXRgLPg58Kg7uQuMl2wHC9wsXqyDO2fOWChnLXsNPtqS0Bvn9Qo5BP9M9ITwlfMwzC4aE1WeA_6EMETqUeQt0IsiWZBXze8ZTNTKQhyUponHgU9h1TUiYHCnzYpAFNv2XhjqmOyh3kg4SyEJjoChvQD8YBrsC99Nk-Fp2wdELufNw4LU8esmlVTczFuF_UsDtqglMgq0njdcbI77nBNpt0Asxz9AGSWzKG7qdTBXEx75sElSN7AB7HeNfsyRVTnoZSy6zdhIMWLJCmJVYc-yxrO8OSCz_WbJHogy27X7sIQcVXUFTyOt9N-yGMIKLzTjlVf69U6AQ3oK5pnlI3XefF43Cz1vI9WnGn0W2fRpE9QpQTQ_HdhrViX98sg6f03oMdCOfCY6flv9UINpa_w-wXcQSn8FUiTZrLIqnkHLHaAn37yFdOnn25XRemhd-p0n0D3Y-oZVAePvwOSbbDm3cMzWdZ0qEzUTvvwItjH6ZZSx8jnTkN-MpAeXItaWgnBDjTZD6Tg_ApUxbQ6O94Z8iTkJZAtriCCot9FXYwnjctKE_ymvl7ea6rrs3ZlOuOYtzDD4ngVGdl9HBoSnR7kjmhHcs0RAk5djpIXFdjkb3Iug7sN_i_v_aN1AmotelIy7PvIQArRuPz17zxeOWX_EQjp7rMSEG-BjtQvJFOLeeNuf5O-dz-FLnqCU9_W7NaTx1yQx3Zw4Ka6B3Y3AGjkovdbHu08N3loB_PLHeWBrimoTOBIOtcq1-218ipBDGE9IJv6rSkK1FzXpv8eR4eF8HSkebxx4M2JxkOigZ0gaHRqsOnMnJw2cNA99zvfkGRwR7aJKJ_AS1dUJDhMOl8pAzsqAiiJuytrS6ve6eglG43Na4-WBMCcvZGsSVEFyGUPq4MBxwv240jiblN_hzH_50euUJ4XMNstivSQKAkiVUoZ_tI8PXzf0A_B2t6Y0kxuG_Z4ziK5mHb3NfTBayiE7Ol4Mq6lDV3-kkWv1HEp2DCQlPE7a_h3Pmp3IaO985ZABQfJL_nEAV0cfkaMCsDCXnhbluxpSDd7OUuwHH8jBZeIFJRMQF3MrmeAFXk6pSSGK3xetqbgsEdtrKcECxRkJ0A.n9r75WTaL50JqSmUP13X6w; _dd_s=rum=0&expire=1722652217204",
    'Oai-Device-Id': "f9f5ab8b-165d-4962-82c1-e176d9069d79",
    'Oai-Echo-Logs': "0,1734,1,2143,0,3187,1,4077,0,14923,1,17245,0,47220",
    'Oai-Language': "en-US",
    'Openai-Sentinel-Chat-Requirements-Token': "gAAAAABmrZKDJGeA6Oh_OrENzoRptdC83vKN4UbYtHQFFbB5QlPdSITKVeY_PfZekY9mlKABMmJWz_6pIGUKFrfYmGtXJQr4eYAZR5XkRsGD7vaxS08ehm45zi2RrlhseX1jmSpCN_VYj6sMbXb_KPss6r27BD3XHGW-rCSOXt5gMHpNr4E9baSy01Q3ZH2VMvsb4gdCxd_6i38NJA8EWPIdy5qS8Pg-Pi28reIu1FDyN2SsTpfrlhExgZpVI1alNzg9HYmM72u3YSJJYPaOoiNvhsvwUt1BlT33kDRX9duRiEC_8UjTz5ru9QepgWVnQ5YsNhtQJfQJssFUl0lef9u2XPNtM8w-RAbtcydNMRDYVVAPpsGE7dXXcNp0y7WNw4TG2gBLPXbueFNcEcVj0gtVk9pWcAijREp3UE4oPaQ4XgSrMxckpNL8Edi3CprfnrqwZvTMkGrP0elYo-lLmPrPRR7FTh0rDCgRi82BbYtm-_x4XpEVaKEBJ7vBhSu3o3eQ35U_TyNZahOyanG8vwn7YeU-855EeZSLU6GstxFwg0CJ1hPnaR4MipBTpUIjTM_Bt7soEj1Y44OLjDXE3L4gSYXejM6BaQcvZl1fUacHk1HrnuBEdtUexGevuzzu0FIjH7X2N-5MhYwTdeV4aW9t4WBNoaAfr4qh5251y8rASRB68CDxMdZT8_rQsYwgnDToAOnkOcHBJv4ykqnI6lMUU6qzgPRyQwiplH61Wa-VXIfKNkOltpWZ4ZkhUZJFfX2DIjAwZoEW1PBxKzzLwebMiqV9cfxSA5e5QBmTmD7WaWxILCAHHsUYozS0QmljZSZU4oszuPWyTU4Oq4fBAEFnw7neVru3lpTA0wuvMETOICzGxPksJU1-OukyeOlWa2dFJVFcKImNIOtuKJXCb43EEJI-Eu7s0ZOIn27ELWpzdBSNF9BGBzxm5Q3DNz5BeKH51I3xI_JWovGozkQK27RM4JgbwM9AFu2FWdRPoT0cLgPCOqnS8yia5MYBxsNhLg95xOZPOqFc74OJovicOGxbRbMXt8rTHzA2prwKYhgmU70doVHM-Ej9Pg6CRZoe6QY_1ORSx4KgfZ2VNm0yhgNlg0OCANFKgV8_C_w79QltXSSfEWS6bRC5gtygw76khZ_Wv6Qh5L3bTI_snapHvHrodhacYnUR-tWfaqXm3v7V2rOkJw3XYjMeZEMun3NrcgWKDcJDdTCh53VchFi80Y7QlC7LAfJtQurLfj31xeqw3bDIi6HC54xkF-8FCG1f5nd9XvFy0qw3xxTQmu06dSGslBM3vKw2ZG4D5cGy3zZpm21DUTH221JBCJD1cYH8KYKbEjmSEgBjxM6C6BdBirkxfIe-vw7tE2ZjbQduj-dBkfdOe-EGq3SQa97RYWDCgwm2hwQZjM5iCcI_BZWiCin3EijQLnY_Yx2hLjdhiFi3DlPA_WpcjEA5dwRolpnVU831De9DaGhsrENLFrRT3AHSzDTnE1ypc_7rg7PXEvIzoSMDifOVsXM9BhT0KD-uTiMMaWUOk1sivqb3a1HLME7T76Vd748ithgDMLwZwPVsQqpTwPe2IJaypszZ-X5tc_Zj7f4Xaclp4aB4_-fjAew2uRjJicE-wA==",
    'Openai-Sentinel-Proof-Token': "gAAAAABWzMwMDgsIlNhdCBBdWcgMDMgMjAyNCAxMDoxNDoyNyBHTVQrMDgwMCAo5Lit5Zu95qCH5YeG5pe26Ze0KSIsNDI5NDcwNTE1Miw3NCwiTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyNi4wLjAuMCBTYWZhcmkvNTM3LjM2IEVkZy8xMjYuMC4wLjAiLCJodHRwczovL2Nkbi5vYWlzdGF0aWMuY29tL19uZXh0L3N0YXRpYy9jaHVua3MvNDQwNC1kYjM2MWY2YmM4MTI3YTZhLmpzIiwiYy9na3hqTEs1S3RMQm9wcGVmU0U5WGcvXyIsImVuLVVTIiwiZW4tVVMsemgtQ04sZW4sZW4tR0IiLDE5LCJpbmviiJJbb2JqZWN0IElua10iLCJfcmVhY3RMaXN0ZW5pbmdnejgxdzlmdDBzZCIsIm9uZHJvcCIsNDI0Ny42MDAwMDAwMDg5NDEsIjI5ZmYyNDhlLTVjNDItNGI0YS1iODk1LTBlNDQ1NDNkZmU4OSJd",
    'Openai-Sentinel-Turnstile-Token': "TRIbBBgDBQwOFGpFHgQGBmxbBAYGAHJBBgYAHmhDBgAeBGpDAB4EBmpFHgQGBmxbBAYGAHJBBgYAHmhDBgAeBGpDAB4EBmpFHgQGBmxbBAYGAHJBBgYAHmhDBgAeBGpDAB4EBmpFHgQGBmxbBAYGAHJBBgYAHhYaFAgZGgYPEhQEGA8HGwQAAAQWBwcABBYMAQQcDAUFGAYbFgwUbFsEBgYGckEGBgFLaEMGAB8MakMAHgQCakUeBAYAbFsEBgYGckEGBgAeaEMGAB9RakMAHgQCakUeBAYAbFsEBgYGckEGBgAeaEMGAB9RakMAHgQCakUeBAYAbFsEBgYGckEGBgAeaEMGAB9SFBoSGgYYBgEMDhQABAAMA1BFQFdCX19AFERXXkpbWx4ZDk8WbV5PQF9AVQ5XWVJVcxRLBQcAAgIUHAwHARgGGhYMFGhsc2JqRR4EBwdsWwQGBgJyQQYGABhoWHtsWwQGBwcYABgOBUhBWFVER1tYFkJPWlJZXQYdFk0QdVpXQllYURZVX0pRaxZNDBgUBAUABRQMEnBwbHJ1clJqQwAeBVBqRR4EBgdncGNyf3RsaEMGAB8MZXdpckEGBgEXFhoUBBsaDwESFBZTUl9OUUlBQVZNQ0dSRVFUSUxbRUVZV1RWRVRQW05fVUpVUEVZSHJBBgYAHmhDBgAfVVNSX05RSUFBVk1DR1JFUVRJTFtFRVlNTkNCSltFS0RqRR4EB1V6e3Brf1N1ZmVqRR4EB1V6e3Brf01uY3RjbFsEBgYCRV10Y39FYWFldn9ddGl1f2xzWWxbBAYHUnJSakMAHgQGakUeBAZTbFsEBgYGckEGBgFPaEMGAB8MZGFya3lTdXBwb3J0ZWRoQwYAHwxqQwAeBAJlY3JBBgYBF2JqQwAeBFBlYWVoQwYAHgRqQwAeBABhZGRoQwYAHgBqQwAeBFNqRR4EB1dfX3RlYV9jYWNoZV9maXJzdF9qQwAeBAVqRR4EBlNsWwQGBgZyQQYGARhoQwYAHgZqQwAeBARqRR4EB1dfX3RlYV9jYWNoZV9maXJzdF9qQwAeBAJqRR4EBgBsWwQGBgByQQYGAUtoQwYAHgFqQwAeBAdqRR4EBgNsWwQGBgFyQQYGABxfX3RlYV9zZGtfYWJfdmVyc2lvbl9qQwAeBAVqRR4EBlNsWwQGBgZyQQYGARhoQwYAHgZqQwAeBARqRR4EB1dvYWlqQwAeBQ9hcHBzakMAHgUPY2FwRXhwaXJoZ3NHamhDBgAeBmFsb3t0dmpFHgQHVGVxaGpwY3RlbGdickEGBgFMd31hdH1wakMAHgQEXVlsYXldZXlncGdZbGtzZ2hrW2pDAB4FVWpFHgQGAmxbBAYGBnJBBgYAGGhDBgAeBWpDAB4FD2pFHgQGAWxbBAYGB3JBBgYBT2t5a2xbBAYHUnxtfBRN",
    'Origin': "https://chatgpt.com",
    'Priority': "u=1, i",
    'Referer': "https://chatgpt.com/",
    'Sec-Ch-Ua': '"Not/A)Brand";v="8", "Chromium";v="126", "Microsoft Edge";v="126"',
    'Sec-Ch-Ua-Arch': "arm",
    'Sec-Ch-Ua-Bitness': "64",
    'Sec-Ch-Ua-Full-Version': "126.0.2592.102",
    'Sec-Ch-Ua-Full-Version-List': '"Not/A)Brand";v="8.0.0.0", "Chromium";v="126.0.6478.127", "Microsoft Edge";v="126.0.2592.102"',
    'Sec-Ch-Ua-Mobile': "?0",
    'Sec-Ch-Ua-Model': "",
    'Sec-Ch-Ua-Platform': "macOS",
    'Sec-Ch-Ua-Platform-Version': "14.5.0",
    'Sec-Fetch-Dest': "empty",
    'Sec-Fetch-Mode': "cors",
    'Sec-Fetch-Site': "same-origin",
    'User-Agent': "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0",
    'content-type': "application/json"
    }

conn.request("POST", "/backend-api/conversation", payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))